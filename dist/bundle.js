!function(e){var t={};function s(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);dayjs.locale("ja"),dayjs.extend(dayjs_plugin_relativeTime);const n=e=>`\n    <article>\n      <header class="bl_text_header">\n        <time class="bl_text_date" datetime="${dayjs(e.date).format("YYYY-MM-DD HH:mm")}">${dayjs(e.date).format("YYYY-MM-DD HH:mm")}\n        </time>\n      </header>\n      <div class="bl_text">\n        <h2 class="bl_text_title">${e.title}</h2>\n        ${e.text}\n      </div>\n      <footer class="bl_text_footer">\n        <span class="bl_posts_dateago">${dayjs(e.date).fromNow()}</span>\n        <ul class="bl_tags">\n          ${e.hashtags}\n        </ul>\n      </footer>\n    </article>`,a=e=>`<li><a href="?tag=${e}">#${e}</a></li>`,i=e=>`<li><a href="?tag=${e}" class="hp_bold">#${e}</a></li>`,l=e=>{document.getElementById("root").innerHTML=e.html,e.pageTitle&&(document.title=e.pageTitle),e.suffix&&(document.querySelector(".el_logo_suffix").innerText=e.suffix),e.description&&(document.querySelector("meta[name=description]").content=e.description),e.archiveHeader&&(document.querySelector(".el_archive_header").innerText=e.archiveHeader)},r=e=>{class t extends HTMLElement{constructor(){super(),this.id=this.getAttribute("id"),this.i=e.length-this.id,this.hashtags=e[this.i].tags.map(e=>`<li>#${e}</li>`).join(""),this.innerHTML=`\n        <div class="bl_blogcard">\n            <a href="?id=${this.id}">\n            <header class="bl_blogcard_header">\n                <div class="bl_blogcard_icon"></div>\n                <div class="bl_blogcard_logo">placet experiri</span>\n                <span class="bl_blogcard_suffix"> :: ${this.id}</span>\n            </header>\n            <div class="bl_blogcard_title">${e[this.i].title}</div>\n            <p class="bl_blogcard_text">${e[this.i].plainText.substr(0,56)}…</p>\n            <footer class="bl_blogcard_footer">\n                <span class="bl_blogcard_time">${dayjs(e[this.i].date).format("YYYY-MM-DD")}</span>\n                <ul class="bl_blogcard_tags">\n                ${this.hashtags}\n                </ul>\n            </footer>\n            </a>\n        </div>`}}window.customElements.define("blog-card",t)},o=(e,t)=>{if(null==t.id&&t.tag){const s=((e,t)=>{for(const s of e){const e=s.tags.includes(t);s.isVisible=!(null!=t&&!e)}return{html:`<ul class="bl_posts">${e.map(e=>{if(!0===e.isVisible)return e.postlistHtml}).join("")}</ul>`,suffix:"",description:"",pageTitle:`#${t}｜placet experiri`,archiveHeader:"#"+t}})(e,t.tag);l(s)}else if(null==t.id){const t=(e=>({html:`<ul class="bl_posts">${e.map(e=>e.postlistHtml).join("")}</ul>`,suffix:"",description:"",pageTitle:"",archiveHeader:""}))(e);l(t)}if(isFinite(t.id)){const a=e.length-t.id,i=(s=e[a],{html:n(s),suffix:" :: "+s.id,description:s.plainText.substr(0,110)+"…",pageTitle:s.title?`${s.title}｜placet experiri :: ${s.id}`:"placet experiri :: "+s.id,archiveHeader:""});l(i),document.querySelector(".el_search_form").classList.add("hp_hidden")}var s};(async()=>{const e=await fetch("./data.json"),t=(e=>{for(const n of e){n.text=n.text.replace(/——/g,"──"),n.title=n.title.replace(/——/g,"──"),n.plainText=n.text.replace(/<("[^"]*"|'[^']*'|[^'">])*>/g,"");const l=125;n.plainText.length>l?n.postText=n.plainText.substr(0,l)+"…":n.postText=n.plainText,n.hashtags=n.tags.map(e=>e===status.tag?i(e):a(e)).join("");const r=e.length-n.id;n.postlistHtml=(t=e[r],`\n    <li class="bl_posts_item" data-id=${s=n.id}>\n      <a href="?id=${s}">\n        <header class="bl_posts_header">\n          <time class="bl_posts_date" datetime="${dayjs(t.date).format("YYYY-MM-DD HH:mm")}">${dayjs(t.date).format("YYYY-MM-DD")}\n          </time>\n        </header>\n        <h2 class="bl_posts_title">\n          ${t.title}\n        </h2>\n        <div class="bl_posts_summary" data-id=${s}>\n          <p>${t.postText}</p>\n        </div>\n      </a>\n      <footer class="bl_posts_footer">\n        <span class="bl_posts_dateago">${dayjs(t.date).fromNow()}</span>\n        <ul class="bl_tags">\n          ${t.hashtags}\n        </ul>\n      </footer>\n    </li>`)}var t,s;return e})(await e.json());o(t,(e=>{const t={};if(!(e=e.slice(1)))return t;return e.split("&").forEach(e=>{const s=e.split("=");t[s[0]]=decodeURIComponent(s[1])}),t})(window.location.search)),document.querySelector(".el_search_form").addEventListener("input",()=>(e=>{const t=document.querySelector(".el_search_form").value;for(const s of e){const e=document.querySelector(`.bl_posts_item[data-id="${s.id}"]`),n=document.querySelector(`.bl_posts_summary[data-id="${s.id}"]`);if(!1===s.isVisible)continue;let a=s.plainText.indexOf(t);const i=s.title.includes(t);let l=s.hashtags.includes(t),r="…";const o=41,c=15,d=o-c-t.length;if(-1!=a||!0===i||!0===l){e.classList.remove("hp_hidden"),a<=c&&(a=c,r=""),r+=s.plainText.substr(a-c,o);a+t.length+d<s.plainText.length&&(r+="…"),r=r.replace(new RegExp(t,"g"),`<span class="hp_highlight">${t}</span>`),n.innerHTML=`<p>${r}</p>`}else e.classList.add("hp_hidden");""===t&&(n.innerHTML=s.postText)}})(t)),r(t)})()}]);