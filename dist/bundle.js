!function(e){var t={};function n(s){if(t[s])return t[s].exports;var l=t[s]={i:s,l:!1,exports:{}};return e[s].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(s,l,function(t){return e[t]}.bind(null,l));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);dayjs.locale("ja"),dayjs.extend(dayjs_plugin_relativeTime);const s=e=>`<li><a href="?tag=${e}">#${e}</a></li>`,l=(e,t=null)=>`\n  <li class="bl_posts_item" data-id=${e.id}>\n    <a href="?id=${e.id}">\n      <header class="bl_posts_header">\n        <time class="bl_posts_date" datetime="${dayjs(e.date).format("YYYY-MM-DD HH:mm")}">${dayjs(e.date).format("YYYY-MM-DD")}\n        </time>\n      </header>\n      <h2 class="bl_posts_title">\n        ${e.title}\n      </h2>\n      <div class="bl_posts_summary" data-id=${e.id}>\n        <p>\n          ${e.plainText.length>125?e.plainText.substr(0,125)+"…":e.plainText}\n        </p>\n      </div>\n    </a>\n    <footer class="bl_posts_footer">\n      <span class="bl_posts_dateago">${dayjs(e.date).fromNow()}</span>\n      <ul class="bl_tags">\n        ${e.tags.map(e=>e===t?(e=>`<li><a href="?tag=${e}" class="hp_bold">#${e}</a></li>`)(e):s(e)).join("")}\n      </ul>\n    </footer>\n  </li>`,a=e=>`\n  <article>\n    <header class="bl_text_header">\n      <time class="bl_text_date" datetime="${dayjs(e.date).format("YYYY-MM-DD HH:mm")}">${dayjs(e.date).format("YYYY-MM-DD HH:mm")}\n      </time>\n    </header>\n    <div class="bl_text">\n      <h2 class="bl_text_title">${e.title}</h2>\n      ${e.text}\n    </div>\n    <footer class="bl_text_footer">\n      <span class="bl_posts_dateago">${dayjs(e.date).fromNow()}</span>\n      <ul class="bl_tags">\n        ${e.tags.map(e=>s(e)).join("")}\n      </ul>\n    </footer>\n  </article>`,i=e=>`\n  ${e.beforeEllipsis}${e.beforeText}\n  <span class="hp_highlight">\n    ${e.word}\n  </span>\n  ${e.afterText}${e.afterEllipsis}`,r=e=>({body:a(e),suffix:" :: "+e.id,description:e.plainText.substr(0,110)+"…",title:e.title?`${e.title}｜placet experiri :: ${e.id}`:"placet experiri :: "+e.id,archiveHeader:""}),o=e=>({body:`\n    <ul class="bl_posts">\n      ${e.map(t=>l(e[t.index])).join("")}\n    </ul>`,suffix:"",description:"",title:"",archiveHeader:""}),d=(e,t)=>({body:`\n    <ul class="bl_posts">\n      ${e.map(n=>null===t||n.tags.includes(t)?l(e[n.index],t):"").join("")}\n    </ul>`,suffix:"",description:"",title:`#${t}｜placet experiri`,archiveHeader:"#"+t}),c=e=>{document.getElementById("root").innerHTML=e.body,e.title&&(document.title=e.title),e.suffix&&(document.querySelector(".el_logo_suffix").innerText=e.suffix),e.description&&(document.querySelector("meta[name=description]").content=e.description),e.archiveHeader&&(document.querySelector(".el_archive_header").innerText=e.archiveHeader)},u=e=>{const t=document.querySelector(".el_search_form").value;e.forEach(e=>{const n=document.querySelector(`.bl_posts_item[data-id="${e.id}"]`),s=document.querySelector(`.bl_posts_summary[data-id="${e.id}"]`),l=e.plainText.indexOf(t);n&&(-1!==l||e.title.includes(t)||e.tags.includes(t)?(n.classList.remove("hp_hidden"),s.innerHTML=`<p>${((e,t,n)=>{const s=n-20,l=n+t.length,a=30-t.length;return-1===n?e.plainText.substr(0,50)+"…":i(s<=0?{beforeEllipsis:"",beforeText:e.plainText.substr(0,n),word:e.plainText.substr(n,t.length),afterText:e.plainText.substr(l,50-l),afterEllipsis:"…"}:{beforeEllipsis:"…",beforeText:e.plainText.substr(s,20),word:e.plainText.substr(n,t.length),afterText:e.plainText.substr(l,a),afterEllipsis:s+50<e.plainText.length?"…":""})})(e,t,l)}</p>`):n.classList.add("hp_hidden"),""===t&&(s.innerHTML=e.plainText.substr(0,125)+"…"))})},p=e=>{class t extends HTMLElement{constructor(){super(),this.id=this.getAttribute("id"),this.hashtags=e[e.length-this.id].tags.map(e=>`<li>#${e}</li>`).join(""),this.innerHTML=`\n        <div class="bl_blogcard">\n          <a href="?id=${this.id}">\n            <header class="bl_blogcard_header">\n              <div class="bl_blogcard_icon"></div>\n              <div class="bl_blogcard_logo">placet experiri</span>\n              <span class="bl_blogcard_suffix"> :: ${this.id}</span>\n            </header>\n            <div class="bl_blogcard_title">${e[e.length-this.id].title}</div>\n            <p class="bl_blogcard_text">\n              ${e[e.length-this.id].plainText.substr(0,56)}…\n            </p>\n            <footer class="bl_blogcard_footer">\n              <span class="bl_blogcard_time">\n                ${dayjs(e[e.length-this.id].date).format("YYYY-MM-DD")}\n              </span>\n              <ul class="bl_blogcard_tags">\n                ${this.hashtags}\n              </ul>\n            </footer>\n          </a>\n        </div>`}}window.customElements.define("blog-card",t)};(async()=>{const e=await fetch("./data.json"),t=(e=>{const t=[...e];for(let e=0;e<t.length;e+=1)t[e].index=e,t[e].id=t.length-e;return t.map(e=>{const t={...e};return t.text=t.text.replace(/——/g,"──"),t.title=t.title.replace(/——/g,"──"),t.plainText=t.text.replace(/<("[^"]*"|'[^']*'|[^'">])*>/g,""),t})})(await e.json());var n;((e,t)=>{null==t.id&&t.tag?c(d(e,t.tag)):null==t.id&&c(o(e)),Number.isFinite(Number(t.id))&&(c(r(e[e.length-t.id])),document.querySelector(".el_search_form").classList.add("hp_hidden"))})(t,(n=window.location.search)?n.slice(1).split("&").reduce((e,t)=>{const n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e},{}):{}),document.querySelector(".el_search_form").addEventListener("input",()=>u(t)),p(t)})()}]);