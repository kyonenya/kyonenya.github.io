(()=>{"use strict";dayjs.locale("ja"),dayjs.extend(dayjs_plugin_relativeTime);const t=t=>`\n    <article>\n      <header class="bl_text_header">\n        <time class="bl_text_date" datetime="${dayjs(t.date).format("YYYY-MM-DD HH:mm")}">${dayjs(t.date).format("YYYY-MM-DD HH:mm")}\n        </time>\n      </header>\n      <div class="bl_text">\n        <h2 class="bl_text_title">${t.title}</h2>\n        ${t.text}\n      </div>\n      <footer class="bl_text_footer">\n        <span class="bl_posts_dateago">${dayjs(t.date).fromNow()}</span>\n        <ul class="bl_tags">\n          ${t.hashtags}\n        </ul>\n      </footer>\n    </article>`,e=t=>`<li><a href="?tag=${t}">#${t}</a></li>`,s=t=>`<li><a href="?tag=${t}" class="hp_bold">#${t}</a></li>`,a=t=>{document.getElementById("root").innerHTML=t.html,t.pageTitle&&(document.title=t.pageTitle),t.suffix&&(document.querySelector(".el_logo_suffix").innerText=t.suffix),t.description&&(document.querySelector("meta[name=description]").content=t.description),t.archiveHeader&&(document.querySelector(".el_archive_header").innerText=t.archiveHeader)},i=(t=>{const e={};return t?(t.split("&").forEach((t=>{const s=t.split("=");e[s[0]]=decodeURIComponent(s[1])})),e):e})(window.location.search.slice(1)),l=l=>{if(l=(t=>{for(const l of t){l.text=l.text.replace(/——/g,"──"),l.title=l.title.replace(/——/g,"──"),l.plainText=l.text.replace(/<("[^"]*"|'[^']*'|[^'">])*>/g,"");const n=125;l.plainText.length>n?l.postText=l.plainText.substr(0,n)+"…":l.postText=l.plainText,l.hashtags=l.tags.map((t=>t===status.tag?s(t):e(t))).join("");const o=t.length-l.id;l.postlistHtml=(a=t[o],`\n    <li class="bl_posts_item" data-id=${i=l.id}>\n      <a href="?id=${i}">\n        <header class="bl_posts_header">\n          <time class="bl_posts_date" datetime="${dayjs(a.date).format("YYYY-MM-DD HH:mm")}">${dayjs(a.date).format("YYYY-MM-DD")}\n          </time>\n        </header>\n        <h2 class="bl_posts_title">\n          ${a.title}\n        </h2>\n        <div class="bl_posts_summary" data-id=${i}>\n          <p>${a.postText}</p>\n        </div>\n      </a>\n      <footer class="bl_posts_footer">\n        <span class="bl_posts_dateago">${dayjs(a.date).fromNow()}</span>\n        <ul class="bl_tags">\n          ${a.hashtags}\n        </ul>\n      </footer>\n    </li>`)}var a,i;return t})(l),null==i.id&&i.tag){const t=((t,e)=>{for(const s of t){const t=s.tags.includes(e);s.isVisible=!(null!=e&&!t)}return{html:`<ul class="bl_posts">${t.map((t=>{if(!0===t.isVisible)return t.postlistHtml})).join("")}</ul>`,suffix:"",description:"",pageTitle:`#${e}｜placet experiri`,archiveHeader:"#"+e}})(l,i.tag);a(t)}else if(null==i.id){const t=(t=>({html:`<ul class="bl_posts">${t.map((t=>t.postlistHtml)).join("")}</ul>`,suffix:"",description:"",pageTitle:"",archiveHeader:""}))(l);a(t)}if(isFinite(i.id)){const e=l.length-i.id,s=(n=l[e],{html:t(n),suffix:" :: "+n.id,description:n.plainText.substr(0,110)+"…",pageTitle:n.title?`${n.title}｜placet experiri :: ${n.id}`:"placet experiri :: "+n.id,archiveHeader:""});a(s),document.querySelector(".el_search_form").classList.add("hp_hidden")}var n;document.querySelector(".el_search_form").addEventListener("input",(()=>{(t=>{const e=document.querySelector(".el_search_form").value;for(const s of t){const t=document.querySelector(`.bl_posts_item[data-id="${s.id}"]`),a=document.querySelector(`.bl_posts_summary[data-id="${s.id}"]`);if(!1===s.isVisible)continue;let i=s.plainText.indexOf(e);const l=s.title.includes(e);let n=s.hashtags.includes(e),o="…";const r=41,d=15,c=r-d-e.length;-1!=i||!0===l||!0===n?(t.classList.remove("hp_hidden"),i<=d&&(i=d,o=""),o+=s.plainText.substr(i-d,r),i+e.length+c<s.plainText.length&&(o+="…"),o=o.replace(new RegExp(e,"g"),`<span class="hp_highlight">${e}</span>`),a.innerHTML=`<p>${o}</p>`):t.classList.add("hp_hidden"),""===e&&(a.innerHTML=s.postText)}})(l)}));class o extends HTMLElement{constructor(){super(),this.id=this.getAttribute("id"),this.i=l.length-this.id,this.hashtags=l[this.i].tags.map((t=>`<li>#${t}</li>`)).join(""),this.innerHTML=`\n        <div class="bl_blogcard">\n            <a href="?id=${this.id}">\n            <header class="bl_blogcard_header">\n                <div class="bl_blogcard_icon"></div>\n                <div class="bl_blogcard_logo">placet experiri</span>\n                <span class="bl_blogcard_suffix"> :: ${this.id}</span>\n            </header>\n            <div class="bl_blogcard_title">${l[this.i].title}</div>\n            <p class="bl_blogcard_text">${l[this.i].plainText.substr(0,56)}…</p>\n            <footer class="bl_blogcard_footer">\n                <span class="bl_blogcard_time">${dayjs(l[this.i].date).format("YYYY-MM-DD")}</span>\n                <ul class="bl_blogcard_tags">\n                ${this.hashtags}\n                </ul>\n            </footer>\n            </a>\n        </div>`}}window.customElements.define("blog-card",o)};(async()=>{const t=await fetch("./data.json"),e=await t.json();l(e)})()})();